{"version":3,"file":"meepo-idesign-share.umd.js","sources":["~/meepo-idesign-share/design-share.module.ts","~/meepo-idesign-share/ng-component.ts","~/meepo-idesign-share/types.ts"],"sourcesContent":["import { NgModule, ModuleWithProviders } from '@angular/core';\nimport { NgComponentDirective } from './ng-component';\nimport { DESIGN_LIBRARYS, DesignLibraryService, DesignApiService, DesignPropsService } from './types';\nexport class IDesignComponentModule {\n/**\n * @param {?} coms\n * @return {?}\n */\npublic static forRoot(coms: any): ModuleWithProviders {\n        return {\n            ngModule: IDesignComponentModule,\n            providers: [{\n                provide: DESIGN_LIBRARYS,\n                useValue: coms,\n                multi: true\n            }]\n        }\n    }\nstatic decorators: DecoratorInvocation[] = [\n{ type: NgModule, args: [{\n    imports: [],\n    exports: [\n        NgComponentDirective\n    ],\n    declarations: [\n        NgComponentDirective\n    ],\n    providers: [\n        DesignApiService,\n        DesignLibraryService,\n        DesignPropsService\n    ],\n}, ] },\n];\n/**\n * @nocollapse\n */\nstatic ctorParameters: () => ({type: any, decorators?: DecoratorInvocation[]}|null)[] = () => [\n];\n}\n\nfunction IDesignComponentModule_tsickle_Closure_declarations() {\n/** @type {?} */\nIDesignComponentModule.decorators;\n/**\n * @nocollapse\n * @type {?}\n */\nIDesignComponentModule.ctorParameters;\n}\n\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n","\nimport {\n    ComponentFactoryResolver, ComponentRef, Directive,\n    Injector, Input, NgModuleFactory, NgModuleRef,\n    OnChanges, OnDestroy, SimpleChanges, StaticProvider,\n    Type, ViewContainerRef, Output, OnInit, ComponentFactory,\n    HostListener, EventEmitter, TemplateRef,\n    IterableDiffers, NgIterable, IterableDiffer, IterableChangeRecord,\n    IterableChanges, Renderer2\n} from '@angular/core';\nimport { ReactComponent } from 'ng-react-component';\nimport { fromEvent } from 'rxjs/observable/fromEvent';\nimport { DesignLibraryProp, DesignLibraryService, DesignPropsService } from './types';\nimport { KeyValueChanges } from '@angular/core';\nexport class NgComponentDirective implements OnChanges {\n    viewContainerRef: ViewContainerRef;\n    componentRef: ComponentRef<ReactComponent<any, any>>;\n    moduleRef: any;\n    // 组件列表\n     ngComponent: NgIterable<DesignLibraryProp>;\n    // 是否预览\n     ngComponentPreview: boolean;\n    // state\n     ngComponentState: any;\n    // class\n     ngComponentClass: any;\n    // style\n     ngComponentStyle: any;\n    // 是否可以拖拽\n     ngComponentDrag: any;\n    // 是否可以放置\n     ngComponentDrop: any;\n\n     ngComponentClick: (sm: any) => {};\n\n    instances: any[] = [];\nprivate _differ: IterableDiffer<any>;\n/**\n * @param {?} _viewContainerRef\n * @param {?} _template\n * @param {?} differs\n * @param {?} librarys\n * @param {?} props\n * @param {?} render\n */\nconstructor(\nprivate _viewContainerRef: ViewContainerRef,\nprivate _template: TemplateRef<any>,\nprivate differs: IterableDiffers,\nprivate librarys: DesignLibraryService,\nprivate props: DesignPropsService,\nprivate render: Renderer2\n    ) {\n        this.viewContainerRef = _viewContainerRef;\n    }\n/**\n * @return {?}\n */\nngDoCheck(): void {\n        if (this._differ) {\n            const /** @type {?} */ changes = this._differ.diff(this.ngComponent);\n            if (changes) {\n                changes.forEachOperation((item: IterableChangeRecord<any>, adjustedPreviousIndex: number, currentIndex: number) => {\n                    if (item.previousIndex == null) {\n                        this.createComponent(item, currentIndex);\n                    } else if (currentIndex == null) {\n                        this._viewContainerRef.remove(adjustedPreviousIndex);\n                    } else {\n                        const /** @type {?} */ view = /** @type {?} */(( this._viewContainerRef.get(adjustedPreviousIndex)));\n                        this._viewContainerRef.move(view, currentIndex);\n                    }\n                });\n            }\n        }\n    }\n/**\n * @param {?} item\n * @param {?} currentIndex\n * @return {?}\n */\nprivate createComponent(item: IterableChangeRecord<DesignLibraryProp>, currentIndex) {\n        try {\n            const /** @type {?} */ designLibraryProp: DesignLibraryProp = item.item;\n            if (designLibraryProp) {\n                let /** @type {?} */ component: Type<any>;\n                const /** @type {?} */ libs = this.librarys.get(designLibraryProp.name);\n                if (this.ngComponentPreview) {\n                    component = libs.view;\n                } else {\n                    component = libs.setting;\n                }\n                const /** @type {?} */ elInjector = this.viewContainerRef.parentInjector;\n                const /** @type {?} */ componentFactoryResolver: ComponentFactoryResolver = this.moduleRef ? this.moduleRef.componentFactoryResolver :\n                    elInjector.get(ComponentFactoryResolver);\n                const /** @type {?} */ componentFactory: ComponentFactory<any> =\n                    componentFactoryResolver.resolveComponentFactory(component);\n                const /** @type {?} */ componentRef = this.viewContainerRef.createComponent<ReactComponent<any, any>>(\n                    componentFactory,\n                    currentIndex,\n                    elInjector\n                );\n                // designLibraryProp.props = JSON.parse(JSON.stringify(designLibraryProp.props));\n                if (designLibraryProp.props) {\n                    componentRef.instance.props = designLibraryProp.props;\n                }\n                if (designLibraryProp.state) {\n                    componentRef.instance.state = designLibraryProp.state;\n                }\n                componentRef.instance.onClick.subscribe(res => {\n                    this.ngComponentClick && this.ngComponentClick(designLibraryProp)\n                });\n                componentRef.instance.setClass(this.ngComponentClass);\n                componentRef.instance.setStyle(this.ngComponentStyle);\n                if (this.ngComponentDrag) {\n                    this.setDrage(componentRef.instance);\n                }\n                if (this.ngComponentDrop) {\n                    this.setDrop(componentRef.instance);\n                }\n                designLibraryProp.uuid = componentRef.instance.guid;\n                const /** @type {?} */ instanceComponent = new InstanceComponent(componentRef.instance.guid, designLibraryProp);\n                this.instances.push(instanceComponent);\n            }\n        } catch ( /** @type {?} */err) {\n            console.log(`${this.ngComponentPreview ? 'preview' : 'setting'} is not fond`, item);\n            console.dir(err);\n        }\n    }\n/**\n * @param {?} changes\n * @return {?}\n */\nngOnChanges(changes: SimpleChanges) {\n        this.viewContainerRef.clear();\n        if ('ngComponent' in changes) {\n            const /** @type {?} */ value = changes['ngComponent'].currentValue;\n            if (value && !this._differ) {\n                try {\n                    this._differ = this.differs.find(value).create()\n                } catch ( /** @type {?} */err) { }\n            }\n        }\n    }\n/**\n * @param {?} instance\n * @return {?}\n */\nprivate setDrage(instance: ReactComponent<any, any>) {\n        instance.setAttribute({\n            draggable: true\n        });\n        const /** @type {?} */ ele = instance.ele.nativeElement;\n        let /** @type {?} */ uuid: string;\n        fromEvent(ele, 'dragstart').subscribe((ev: DragEvent) => {\n            uuid = instance.guid;\n            ev.dataTransfer.setData(\"name\", 'guid_' + instance.guid);\n        });\n        fromEvent(ele, 'dragend').subscribe((ev: DragEvent) => {\n            // dragend 删除这一个\n            // this.history.removeComponentByUuid(uuid);\n        });\n    }\n/**\n * @param {?} name\n * @return {?}\n */\nprivate isGuid(name: string) {\n        return name.indexOf('guid_') > -1;\n    }\n/**\n * @param {?} name\n * @return {?}\n */\nprivate trimGuid(name: string) {\n        return name.replace('guid_', '');\n    }\n/**\n * @param {?} instance\n * @return {?}\n */\nprivate setDrop(instance: ReactComponent<any, any>) {\n        const /** @type {?} */ ele = instance.ele.nativeElement;\n        fromEvent(ele, 'drop').subscribe((ev: DragEvent) => {\n            ev.preventDefault();\n            ev.stopPropagation();\n            var /** @type {?} */ data = ev.dataTransfer.getData(\"name\");\n            var /** @type {?} */ uuid = this.trimGuid(data);\n            console.log(instance, data);\n            if (!this.isGuid(data)) {\n                // 获取props\n                const /** @type {?} */ props = this.props.getPropsByName(data);\n                instance.props.children = instance.props.children || [];\n                instance.props.children.push(props);\n            } else if(uuid !== instance.guid){\n                // 移动已存在props\n                let /** @type {?} */ props = this.getInstanceProps(uuid);\n                if (props) {\n                    instance.props.children.push(props);\n                }\n            }\n        });\n        fromEvent(ele, 'dragleave').subscribe((ev: DragEvent) => {\n            // dragend 删除这一个\n            this.render.removeStyle(ele, 'dashed');\n            ev.preventDefault();\n            ev.stopPropagation();\n        });\n        fromEvent(ele, 'dragover').subscribe((ev: DragEvent) => {\n            this.render.setStyle(ele, 'dashed', '1px lodash red');\n            ev.preventDefault();\n            ev.stopPropagation();\n        });\n    }\n/**\n * @param {?} uuid\n * @return {?}\n */\nprivate getInstanceProps(uuid: string) {\n        let /** @type {?} */ props: DesignLibraryProp;\n        this.instances.map(res => {\n            if (res.guid === uuid) {\n                props = res.props;\n            }\n        });\n        return props;\n    }\nstatic decorators: DecoratorInvocation[] = [\n{ type: Directive, args: [{ selector: '[ngComponent]' }, ] },\n];\n/**\n * @nocollapse\n */\nstatic ctorParameters: () => ({type: any, decorators?: DecoratorInvocation[]}|null)[] = () => [\n{type: ViewContainerRef, },\n{type: TemplateRef, },\n{type: IterableDiffers, },\n{type: DesignLibraryService, },\n{type: DesignPropsService, },\n{type: Renderer2, },\n];\nstatic propDecorators: {[key: string]: DecoratorInvocation[]} = {\n'ngComponent': [{ type: Input },],\n'ngComponentPreview': [{ type: Input },],\n'ngComponentState': [{ type: Input },],\n'ngComponentClass': [{ type: Input },],\n'ngComponentStyle': [{ type: Input },],\n'ngComponentDrag': [{ type: Input },],\n'ngComponentDrop': [{ type: Input },],\n'ngComponentClick': [{ type: Input },],\n};\n}\n\nfunction NgComponentDirective_tsickle_Closure_declarations() {\n/** @type {?} */\nNgComponentDirective.decorators;\n/**\n * @nocollapse\n * @type {?}\n */\nNgComponentDirective.ctorParameters;\n/** @type {?} */\nNgComponentDirective.propDecorators;\n/** @type {?} */\nNgComponentDirective.prototype.viewContainerRef;\n/** @type {?} */\nNgComponentDirective.prototype.componentRef;\n/** @type {?} */\nNgComponentDirective.prototype.moduleRef;\n/** @type {?} */\nNgComponentDirective.prototype.ngComponent;\n/** @type {?} */\nNgComponentDirective.prototype.ngComponentPreview;\n/** @type {?} */\nNgComponentDirective.prototype.ngComponentState;\n/** @type {?} */\nNgComponentDirective.prototype.ngComponentClass;\n/** @type {?} */\nNgComponentDirective.prototype.ngComponentStyle;\n/** @type {?} */\nNgComponentDirective.prototype.ngComponentDrag;\n/** @type {?} */\nNgComponentDirective.prototype.ngComponentDrop;\n/** @type {?} */\nNgComponentDirective.prototype.ngComponentClick;\n/** @type {?} */\nNgComponentDirective.prototype.instances;\n/** @type {?} */\nNgComponentDirective.prototype._differ;\n/** @type {?} */\nNgComponentDirective.prototype._viewContainerRef;\n/** @type {?} */\nNgComponentDirective.prototype._template;\n/** @type {?} */\nNgComponentDirective.prototype.differs;\n/** @type {?} */\nNgComponentDirective.prototype.librarys;\n/** @type {?} */\nNgComponentDirective.prototype.props;\n/** @type {?} */\nNgComponentDirective.prototype.render;\n}\n\nexport class InstanceComponent {\n/**\n * @param {?} guid\n * @param {?} props\n */\nconstructor(\npublic guid: string,\npublic props: DesignLibraryProp\n    ) { }\n}\n\nfunction InstanceComponent_tsickle_Closure_declarations() {\n/** @type {?} */\nInstanceComponent.prototype.guid;\n/** @type {?} */\nInstanceComponent.prototype.props;\n}\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n","import { Type, Injector, NgModuleFactory } from '@angular/core';\n/**\n * @template T\n * @param {?} arr\n * @return {?}\n */\nfunction flatten<T>(arr: T[][]): T[] {\n    return Array.prototype.concat.apply([], arr);\n}\n// 页面组件结构\nexport interface DesignLibraryProp {\n    children: DesignLibraryProp[];\n    name: string;\n    uuid?: string;\n    props: any,\n    state?: any,\n    title: string;\n}\n// 历史记录结构\nexport interface DesignHistoryProp {\n    name: string;\n    data: DesignLibraryProp[];\n}\n\nimport { Injectable, InjectionToken, Inject } from '@angular/core';\nexport const /** @type {?} */ DESIGN_LIBRARYS = new InjectionToken('DESIGN_LIBRARYS');\nexport class DesignApiService {\nconstructor() { }\n/**\n * @param {?} id\n * @return {?}\n */\nget(id: string) { }\n/**\n * @param {?} data\n * @param {?} id\n * @return {?}\n */\nsave(data: any, id: string) { }\nstatic decorators: DecoratorInvocation[] = [\n{ type: Injectable },\n];\n/**\n * @nocollapse\n */\nstatic ctorParameters: () => ({type: any, decorators?: DecoratorInvocation[]}|null)[] = () => [\n];\n}\n\nfunction DesignApiService_tsickle_Closure_declarations() {\n/** @type {?} */\nDesignApiService.decorators;\n/**\n * @nocollapse\n * @type {?}\n */\nDesignApiService.ctorParameters;\n}\n\nexport const /** @type {?} */ DESIGN_COMPONENTS = new InjectionToken('DESIGN_COMPONENTS');\nexport class DesignPropsService {\n    // 所有props\n    props: any[] = [];\n    // 当前页面\n    pageProps: any[] = [];\n    // 设置\n    settingProps: any = {};\n\n    historyKey: string = 'historyKey';\n    // 历史记录\n    historys: any[] = [];\n/**\n * @param {?} props\n */\nconstructor(\n         props: any\n    ) {\n        this.props = flatten(props);\n        try {\n            this.backToHistory();\n        } catch (err) {\n            localStorage.clear();\n        }\n    }\n/**\n * @param {?} name\n * @return {?}\n */\ngetPropsByName(name: string): DesignLibraryProp {\n        let /** @type {?} */ com: DesignLibraryProp;\n        this.props.forEach((item) => {\n            if (name === item.name) {\n                com = item;\n            }\n        });\n        return com;\n    }\n/**\n * @param {?} name\n * @return {?}\n */\naddPropByName(name: string){\n        const /** @type {?} */ com = this.getPropsByName(name);\n        this.pageProps.push(com);\n        this.updateHistory();\n    }\n/**\n * @param {?} uuid\n * @return {?}\n */\nremovePropsByUid(uuid: string) {\n        let /** @type {?} */ thisIndex: any;\n        this.pageProps.map((res: DesignLibraryProp, index: number) => {\n            if (res.uuid === uuid) {\n                thisIndex = index;\n            }\n        });\n        this.pageProps.splice(thisIndex, 1);\n        this.updateHistory();\n    }\n/**\n * @return {?}\n */\ngetHistory(): DesignHistoryProp[] {\n        let /** @type {?} */ local = localStorage.getItem(this.historyKey);\n        if (local) {\n            const /** @type {?} */ items = /** @type {?} */(( JSON.parse(local) as DesignHistoryProp[]));\n            return items;\n        } else {\n            return [];\n        }\n    }\n/**\n * @return {?}\n */\nupdateHistory(): void {\n        this.historys.unshift({\n            name: new Date().toISOString(),\n            data: this.pageProps\n        });\n        if (this.historys.length > 50) {\n            this.historys = this.historys.splice(this.historys.length, this.historys.length - 50);\n        }\n        localStorage.setItem(this.historyKey, JSON.stringify(this.historys));\n    }\n/**\n * @param {?=} item\n * @return {?}\n */\nbackToHistory(item: DesignHistoryProp = null) {\n        if (!item) {\n            item = this.getHistory()[0];\n        }\n        this.pageProps = item.data;\n    }\nstatic decorators: DecoratorInvocation[] = [\n{ type: Injectable },\n];\n/**\n * @nocollapse\n */\nstatic ctorParameters: () => ({type: any, decorators?: DecoratorInvocation[]}|null)[] = () => [\n{type: undefined, decorators: [{ type: Inject, args: [DESIGN_COMPONENTS, ] }, ]},\n];\n}\n\nfunction DesignPropsService_tsickle_Closure_declarations() {\n/** @type {?} */\nDesignPropsService.decorators;\n/**\n * @nocollapse\n * @type {?}\n */\nDesignPropsService.ctorParameters;\n/** @type {?} */\nDesignPropsService.prototype.props;\n/** @type {?} */\nDesignPropsService.prototype.pageProps;\n/** @type {?} */\nDesignPropsService.prototype.settingProps;\n/** @type {?} */\nDesignPropsService.prototype.historyKey;\n/** @type {?} */\nDesignPropsService.prototype.historys;\n}\n\nexport class DesignLibraryService {\nprivate components: { [key: string]: Type<any> }[] = [];\n/**\n * @param {?} components\n */\nconstructor(\n         components: any\n    ) {\n        this.components = flatten(components);\n        console.log('DesignLibraryService', this.components);\n    }\n/**\n * @param {?} name\n * @return {?}\n */\nget(name: string) {\n        let /** @type {?} */ com: any;\n        this.components.map(item => {\n            if (item[name]) {\n                com = item[name];\n            }\n        });\n        return com;\n    }\nstatic decorators: DecoratorInvocation[] = [\n{ type: Injectable },\n];\n/**\n * @nocollapse\n */\nstatic ctorParameters: () => ({type: any, decorators?: DecoratorInvocation[]}|null)[] = () => [\n{type: undefined, decorators: [{ type: Inject, args: [DESIGN_LIBRARYS, ] }, ]},\n];\n}\n\nfunction DesignLibraryService_tsickle_Closure_declarations() {\n/** @type {?} */\nDesignLibraryService.decorators;\n/**\n * @nocollapse\n * @type {?}\n */\nDesignLibraryService.ctorParameters;\n/** @type {?} */\nDesignLibraryService.prototype.components;\n}\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n"],"names":["NgModule","Input","Renderer2","IterableDiffers","TemplateRef","ViewContainerRef","Directive","fromEvent","ComponentFactoryResolver","Inject","Injectable","InjectionToken"],"mappings":"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"}
