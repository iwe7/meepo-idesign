{"version":3,"file":"meepo-idesign-share.es5.js","sources":["ts/meepo-idesign-share.ts","ts/design-share.module.ts","ts/ng-component.ts","ts/types.ts"],"sourcesContent":["/**\n * Generated bundle index. Do not edit.\n */\n\nexport {IDesignComponentModule,NgComponentDirective,InstanceComponent,DesignLibraryProp,DesignHistoryProp,DesignApiService,DesignLibraryService,DESIGN_LIBRARYS,DesignPropsService,DESIGN_COMPONENTS} from './public_api';\n","import { NgModule, ModuleWithProviders } from '@angular/core';\nimport { NgComponentDirective } from './ng-component';\nimport { DESIGN_LIBRARYS, DesignLibraryService, DesignApiService, DesignPropsService } from './types';\nexport class IDesignComponentModule {\n/**\n * @param {?} coms\n * @return {?}\n */\npublic static forRoot(coms: any): ModuleWithProviders {\n        return {\n            ngModule: IDesignComponentModule,\n            providers: [{\n                provide: DESIGN_LIBRARYS,\n                useValue: coms,\n                multi: true\n            }]\n        }\n    }\nstatic decorators: DecoratorInvocation[] = [\n{ type: NgModule, args: [{\n    imports: [],\n    exports: [\n        NgComponentDirective\n    ],\n    declarations: [\n        NgComponentDirective\n    ],\n    providers: [\n        DesignApiService,\n        DesignLibraryService,\n        DesignPropsService\n    ],\n}, ] },\n];\n/**\n * @nocollapse\n */\nstatic ctorParameters: () => ({type: any, decorators?: DecoratorInvocation[]}|null)[] = () => [\n];\n}\n\nfunction IDesignComponentModule_tsickle_Closure_declarations() {\n/** @type {?} */\nIDesignComponentModule.decorators;\n/**\n * @nocollapse\n * @type {?}\n */\nIDesignComponentModule.ctorParameters;\n}\n\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n","\nimport {\n    ComponentFactoryResolver, ComponentRef, Directive,\n    Injector, Input, NgModuleFactory, NgModuleRef,\n    OnChanges, OnDestroy, SimpleChanges, StaticProvider,\n    Type, ViewContainerRef, Output, OnInit, ComponentFactory,\n    HostListener, EventEmitter, TemplateRef,\n    IterableDiffers, NgIterable, IterableDiffer, IterableChangeRecord,\n    IterableChanges, Renderer2\n} from '@angular/core';\nimport { ReactComponent } from 'ng-react-component';\nimport { fromEvent } from 'rxjs/observable/fromEvent';\nimport { DesignLibraryProp, DesignLibraryService, DesignPropsService } from './types';\nimport { KeyValueChanges } from '@angular/core';\nexport class NgComponentDirective implements OnChanges {\n    viewContainerRef: ViewContainerRef;\n    componentRef: ComponentRef<ReactComponent<any, any>>;\n    moduleRef: any;\n    // 组件列表\n     ngComponent: NgIterable<DesignLibraryProp>;\n    // 是否预览\n     ngComponentPreview: boolean;\n    // state\n     ngComponentState: any;\n    // class\n     ngComponentClass: any;\n    // style\n     ngComponentStyle: any;\n    // 是否可以拖拽\n     ngComponentDrag: any;\n    // 是否可以放置\n     ngComponentDrop: any;\n\n     ngComponentClick: (sm: any) => {};\n\n    instances: any[] = [];\nprivate _differ: IterableDiffer<any>;\n/**\n * @param {?} _viewContainerRef\n * @param {?} _template\n * @param {?} differs\n * @param {?} librarys\n * @param {?} props\n * @param {?} render\n */\nconstructor(\nprivate _viewContainerRef: ViewContainerRef,\nprivate _template: TemplateRef<any>,\nprivate differs: IterableDiffers,\nprivate librarys: DesignLibraryService,\nprivate props: DesignPropsService,\nprivate render: Renderer2\n    ) {\n        this.viewContainerRef = _viewContainerRef;\n    }\n/**\n * @return {?}\n */\nngDoCheck(): void {\n        if (this._differ) {\n            const /** @type {?} */ changes = this._differ.diff(this.ngComponent);\n            if (changes) {\n                changes.forEachOperation((item: IterableChangeRecord<any>, adjustedPreviousIndex: number, currentIndex: number) => {\n                    if (item.previousIndex == null) {\n                        this.createComponent(item, currentIndex);\n                    } else if (currentIndex == null) {\n                        this._viewContainerRef.remove(adjustedPreviousIndex);\n                    } else {\n                        const /** @type {?} */ view = /** @type {?} */(( this._viewContainerRef.get(adjustedPreviousIndex)));\n                        this._viewContainerRef.move(view, currentIndex);\n                    }\n                });\n            }\n        }\n    }\n/**\n * @param {?} item\n * @param {?} currentIndex\n * @return {?}\n */\nprivate createComponent(item: IterableChangeRecord<DesignLibraryProp>, currentIndex) {\n        try {\n            const /** @type {?} */ designLibraryProp: DesignLibraryProp = item.item;\n            if (designLibraryProp) {\n                let /** @type {?} */ component: Type<any>;\n                const /** @type {?} */ libs = this.librarys.get(designLibraryProp.name);\n                if (this.ngComponentPreview) {\n                    component = libs.view;\n                } else {\n                    component = libs.setting;\n                }\n                const /** @type {?} */ elInjector = this.viewContainerRef.parentInjector;\n                const /** @type {?} */ componentFactoryResolver: ComponentFactoryResolver = this.moduleRef ? this.moduleRef.componentFactoryResolver :\n                    elInjector.get(ComponentFactoryResolver);\n                const /** @type {?} */ componentFactory: ComponentFactory<any> =\n                    componentFactoryResolver.resolveComponentFactory(component);\n                const /** @type {?} */ componentRef = this.viewContainerRef.createComponent<ReactComponent<any, any>>(\n                    componentFactory,\n                    currentIndex,\n                    elInjector\n                );\n                // designLibraryProp.props = JSON.parse(JSON.stringify(designLibraryProp.props));\n                if (designLibraryProp.props) {\n                    componentRef.instance.props = designLibraryProp.props;\n                }\n                if (designLibraryProp.state) {\n                    componentRef.instance.state = designLibraryProp.state;\n                }\n                componentRef.instance.onClick.subscribe(res => {\n                    this.ngComponentClick && this.ngComponentClick(designLibraryProp)\n                });\n                componentRef.instance.setClass(this.ngComponentClass);\n                componentRef.instance.setStyle(this.ngComponentStyle);\n                if (this.ngComponentDrag) {\n                    this.setDrage(componentRef.instance);\n                }\n                if (this.ngComponentDrop) {\n                    this.setDrop(componentRef.instance);\n                }\n                designLibraryProp.uuid = componentRef.instance.guid;\n                const /** @type {?} */ instanceComponent = new InstanceComponent(componentRef.instance.guid, designLibraryProp);\n                this.instances.push(instanceComponent);\n            }\n        } catch ( /** @type {?} */err) {\n            console.log(`${this.ngComponentPreview ? 'preview' : 'setting'} is not fond`, item);\n            console.dir(err);\n        }\n    }\n/**\n * @param {?} changes\n * @return {?}\n */\nngOnChanges(changes: SimpleChanges) {\n        this.viewContainerRef.clear();\n        if ('ngComponent' in changes) {\n            const /** @type {?} */ value = changes['ngComponent'].currentValue;\n            if (value && !this._differ) {\n                try {\n                    this._differ = this.differs.find(value).create()\n                } catch ( /** @type {?} */err) { }\n            }\n        }\n    }\n/**\n * @param {?} instance\n * @return {?}\n */\nprivate setDrage(instance: ReactComponent<any, any>) {\n        instance.setAttribute({\n            draggable: true\n        });\n        const /** @type {?} */ ele = instance.ele.nativeElement;\n        let /** @type {?} */ uuid: string;\n        fromEvent(ele, 'dragstart').subscribe((ev: DragEvent) => {\n            uuid = instance.guid;\n            ev.dataTransfer.setData(\"name\", 'guid_' + instance.guid);\n        });\n        fromEvent(ele, 'dragend').subscribe((ev: DragEvent) => {\n            // dragend 删除这一个\n            // this.history.removeComponentByUuid(uuid);\n        });\n    }\n/**\n * @param {?} name\n * @return {?}\n */\nprivate isGuid(name: string) {\n        return name.indexOf('guid_') > -1;\n    }\n/**\n * @param {?} name\n * @return {?}\n */\nprivate trimGuid(name: string) {\n        return name.replace('guid_', '');\n    }\n/**\n * @param {?} instance\n * @return {?}\n */\nprivate setDrop(instance: ReactComponent<any, any>) {\n        const /** @type {?} */ ele = instance.ele.nativeElement;\n        fromEvent(ele, 'drop').subscribe((ev: DragEvent) => {\n            ev.preventDefault();\n            ev.stopPropagation();\n            var /** @type {?} */ data = ev.dataTransfer.getData(\"name\");\n            var /** @type {?} */ uuid = this.trimGuid(data);\n            console.log(instance, data);\n            if (!this.isGuid(data)) {\n                // 获取props\n                const /** @type {?} */ props = this.props.getPropsByName(data);\n                instance.props.children = instance.props.children || [];\n                instance.props.children.push(props);\n            } else if(uuid !== instance.guid){\n                // 移动已存在props\n                let /** @type {?} */ props = this.getInstanceProps(uuid);\n                if (props) {\n                    instance.props.children.push(props);\n                }\n            }\n        });\n        fromEvent(ele, 'dragleave').subscribe((ev: DragEvent) => {\n            // dragend 删除这一个\n            this.render.removeStyle(ele, 'dashed');\n            ev.preventDefault();\n            ev.stopPropagation();\n        });\n        fromEvent(ele, 'dragover').subscribe((ev: DragEvent) => {\n            this.render.setStyle(ele, 'dashed', '1px lodash red');\n            ev.preventDefault();\n            ev.stopPropagation();\n        });\n    }\n/**\n * @param {?} uuid\n * @return {?}\n */\nprivate getInstanceProps(uuid: string) {\n        let /** @type {?} */ props: DesignLibraryProp;\n        this.instances.map(res => {\n            if (res.guid === uuid) {\n                props = res.props;\n            }\n        });\n        return props;\n    }\nstatic decorators: DecoratorInvocation[] = [\n{ type: Directive, args: [{ selector: '[ngComponent]' }, ] },\n];\n/**\n * @nocollapse\n */\nstatic ctorParameters: () => ({type: any, decorators?: DecoratorInvocation[]}|null)[] = () => [\n{type: ViewContainerRef, },\n{type: TemplateRef, },\n{type: IterableDiffers, },\n{type: DesignLibraryService, },\n{type: DesignPropsService, },\n{type: Renderer2, },\n];\nstatic propDecorators: {[key: string]: DecoratorInvocation[]} = {\n'ngComponent': [{ type: Input },],\n'ngComponentPreview': [{ type: Input },],\n'ngComponentState': [{ type: Input },],\n'ngComponentClass': [{ type: Input },],\n'ngComponentStyle': [{ type: Input },],\n'ngComponentDrag': [{ type: Input },],\n'ngComponentDrop': [{ type: Input },],\n'ngComponentClick': [{ type: Input },],\n};\n}\n\nfunction NgComponentDirective_tsickle_Closure_declarations() {\n/** @type {?} */\nNgComponentDirective.decorators;\n/**\n * @nocollapse\n * @type {?}\n */\nNgComponentDirective.ctorParameters;\n/** @type {?} */\nNgComponentDirective.propDecorators;\n/** @type {?} */\nNgComponentDirective.prototype.viewContainerRef;\n/** @type {?} */\nNgComponentDirective.prototype.componentRef;\n/** @type {?} */\nNgComponentDirective.prototype.moduleRef;\n/** @type {?} */\nNgComponentDirective.prototype.ngComponent;\n/** @type {?} */\nNgComponentDirective.prototype.ngComponentPreview;\n/** @type {?} */\nNgComponentDirective.prototype.ngComponentState;\n/** @type {?} */\nNgComponentDirective.prototype.ngComponentClass;\n/** @type {?} */\nNgComponentDirective.prototype.ngComponentStyle;\n/** @type {?} */\nNgComponentDirective.prototype.ngComponentDrag;\n/** @type {?} */\nNgComponentDirective.prototype.ngComponentDrop;\n/** @type {?} */\nNgComponentDirective.prototype.ngComponentClick;\n/** @type {?} */\nNgComponentDirective.prototype.instances;\n/** @type {?} */\nNgComponentDirective.prototype._differ;\n/** @type {?} */\nNgComponentDirective.prototype._viewContainerRef;\n/** @type {?} */\nNgComponentDirective.prototype._template;\n/** @type {?} */\nNgComponentDirective.prototype.differs;\n/** @type {?} */\nNgComponentDirective.prototype.librarys;\n/** @type {?} */\nNgComponentDirective.prototype.props;\n/** @type {?} */\nNgComponentDirective.prototype.render;\n}\n\nexport class InstanceComponent {\n/**\n * @param {?} guid\n * @param {?} props\n */\nconstructor(\npublic guid: string,\npublic props: DesignLibraryProp\n    ) { }\n}\n\nfunction InstanceComponent_tsickle_Closure_declarations() {\n/** @type {?} */\nInstanceComponent.prototype.guid;\n/** @type {?} */\nInstanceComponent.prototype.props;\n}\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n","import { Type, Injector, NgModuleFactory } from '@angular/core';\n/**\n * @template T\n * @param {?} arr\n * @return {?}\n */\nfunction flatten<T>(arr: T[][]): T[] {\n    return Array.prototype.concat.apply([], arr);\n}\n// 页面组件结构\nexport interface DesignLibraryProp {\n    children: DesignLibraryProp[];\n    name: string;\n    uuid?: string;\n    props: any,\n    state?: any,\n    title: string;\n}\n// 历史记录结构\nexport interface DesignHistoryProp {\n    name: string;\n    data: DesignLibraryProp[];\n}\n\nimport { Injectable, InjectionToken, Inject } from '@angular/core';\nexport const /** @type {?} */ DESIGN_LIBRARYS = new InjectionToken('DESIGN_LIBRARYS');\nexport class DesignApiService {\nconstructor() { }\n/**\n * @param {?} id\n * @return {?}\n */\nget(id: string) { }\n/**\n * @param {?} data\n * @param {?} id\n * @return {?}\n */\nsave(data: any, id: string) { }\nstatic decorators: DecoratorInvocation[] = [\n{ type: Injectable },\n];\n/**\n * @nocollapse\n */\nstatic ctorParameters: () => ({type: any, decorators?: DecoratorInvocation[]}|null)[] = () => [\n];\n}\n\nfunction DesignApiService_tsickle_Closure_declarations() {\n/** @type {?} */\nDesignApiService.decorators;\n/**\n * @nocollapse\n * @type {?}\n */\nDesignApiService.ctorParameters;\n}\n\nexport const /** @type {?} */ DESIGN_COMPONENTS = new InjectionToken('DESIGN_COMPONENTS');\nexport class DesignPropsService {\n    // 所有props\n    props: any[] = [];\n    // 当前页面\n    pageProps: any[] = [];\n    // 设置\n    settingProps: any = {};\n\n    historyKey: string = 'historyKey';\n    // 历史记录\n    historys: any[] = [];\n/**\n * @param {?} props\n */\nconstructor(\n         props: any\n    ) {\n        this.props = flatten(props);\n        try {\n            this.backToHistory();\n        } catch (err) {\n            localStorage.clear();\n        }\n    }\n/**\n * @param {?} name\n * @return {?}\n */\ngetPropsByName(name: string): DesignLibraryProp {\n        let /** @type {?} */ com: DesignLibraryProp;\n        this.props.forEach((item) => {\n            if (name === item.name) {\n                com = item;\n            }\n        });\n        return com;\n    }\n/**\n * @param {?} name\n * @return {?}\n */\naddPropByName(name: string){\n        const /** @type {?} */ com = this.getPropsByName(name);\n        this.pageProps.push(com);\n        this.updateHistory();\n    }\n/**\n * @param {?} uuid\n * @return {?}\n */\nremovePropsByUid(uuid: string) {\n        let /** @type {?} */ thisIndex: any;\n        this.pageProps.map((res: DesignLibraryProp, index: number) => {\n            if (res.uuid === uuid) {\n                thisIndex = index;\n            }\n        });\n        this.pageProps.splice(thisIndex, 1);\n        this.updateHistory();\n    }\n/**\n * @return {?}\n */\ngetHistory(): DesignHistoryProp[] {\n        let /** @type {?} */ local = localStorage.getItem(this.historyKey);\n        if (local) {\n            const /** @type {?} */ items = /** @type {?} */(( JSON.parse(local) as DesignHistoryProp[]));\n            return items;\n        } else {\n            return [];\n        }\n    }\n/**\n * @return {?}\n */\nupdateHistory(): void {\n        this.historys.unshift({\n            name: new Date().toISOString(),\n            data: this.pageProps\n        });\n        if (this.historys.length > 50) {\n            this.historys = this.historys.splice(this.historys.length, this.historys.length - 50);\n        }\n        localStorage.setItem(this.historyKey, JSON.stringify(this.historys));\n    }\n/**\n * @param {?=} item\n * @return {?}\n */\nbackToHistory(item: DesignHistoryProp = null) {\n        if (!item) {\n            item = this.getHistory()[0];\n        }\n        this.pageProps = item.data;\n    }\nstatic decorators: DecoratorInvocation[] = [\n{ type: Injectable },\n];\n/**\n * @nocollapse\n */\nstatic ctorParameters: () => ({type: any, decorators?: DecoratorInvocation[]}|null)[] = () => [\n{type: undefined, decorators: [{ type: Inject, args: [DESIGN_COMPONENTS, ] }, ]},\n];\n}\n\nfunction DesignPropsService_tsickle_Closure_declarations() {\n/** @type {?} */\nDesignPropsService.decorators;\n/**\n * @nocollapse\n * @type {?}\n */\nDesignPropsService.ctorParameters;\n/** @type {?} */\nDesignPropsService.prototype.props;\n/** @type {?} */\nDesignPropsService.prototype.pageProps;\n/** @type {?} */\nDesignPropsService.prototype.settingProps;\n/** @type {?} */\nDesignPropsService.prototype.historyKey;\n/** @type {?} */\nDesignPropsService.prototype.historys;\n}\n\nexport class DesignLibraryService {\nprivate components: { [key: string]: Type<any> }[] = [];\n/**\n * @param {?} components\n */\nconstructor(\n         components: any\n    ) {\n        this.components = flatten(components);\n        console.log('DesignLibraryService', this.components);\n    }\n/**\n * @param {?} name\n * @return {?}\n */\nget(name: string) {\n        let /** @type {?} */ com: any;\n        this.components.map(item => {\n            if (item[name]) {\n                com = item[name];\n            }\n        });\n        return com;\n    }\nstatic decorators: DecoratorInvocation[] = [\n{ type: Injectable },\n];\n/**\n * @nocollapse\n */\nstatic ctorParameters: () => ({type: any, decorators?: DecoratorInvocation[]}|null)[] = () => [\n{type: undefined, decorators: [{ type: Inject, args: [DESIGN_LIBRARYS, ] }, ]},\n];\n}\n\nfunction DesignLibraryService_tsickle_Closure_declarations() {\n/** @type {?} */\nDesignLibraryService.decorators;\n/**\n * @nocollapse\n * @type {?}\n */\nDesignLibraryService.ctorParameters;\n/** @type {?} */\nDesignLibraryService.prototype.components;\n}\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n"],"names":["fromEvent"],"mappings":"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"}
